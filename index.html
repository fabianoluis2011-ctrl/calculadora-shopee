<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora Shopee - Fabiano Souza</title>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root{
      --shopee-orange: #EE4D2D;
      --shopee-orange-2: #FF7A00;

      --bg-1: #1f2430;
      --bg-2: #05060a;
      --bg-3: #000;

      --card-1: rgba(24,27,34,0.96);
      --card-2: rgba(18,21,28,0.98);

      --text: #f5f5f5;
      --muted: #9ca3af;

      --green: #22c55e;
      --red: #ef4444;

      --panel-radius: 18px;
      --panel-pad: 18px;
      --gap: 16px;

      --max-w: 1080px;
    }

    html, body { height: 100%; }

    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background: radial-gradient(circle at top, var(--bg-1) 0, var(--bg-2) 55%, var(--bg-3) 100%);
      overflow: hidden;
    }

    body.locked{
      background: radial-gradient(circle at center, #1a1f2e 0%, #0f1115 70%, #000 100%);
    }

    .stage{
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 22px;
    }

    .wrap{
      width: min(var(--max-w), 100%);
      height: min(720px, calc(100vh - 44px));
      display: flex;
      flex-direction: column;
      gap: 14px;

      opacity: 0;
      transform: translateY(14px);
      transition: all 0.35s ease-out;
    }
    .wrap.unlocked{
      opacity: 1;
      transform: translateY(0);
    }

    header{
      text-align: center;
      padding: 6px 0 2px;
      flex: 0 0 auto;
    }
    header h1{
      font-size: 1.9rem;
      letter-spacing: 0.02em;
      font-weight: 900;

      background: linear-gradient(135deg, var(--shopee-orange), var(--shopee-orange-2));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;

      text-shadow: 0 0 22px rgba(238,77,45,0.22);
    }
    header p{
      margin-top: 6px;
      font-size: 0.95rem;
      color: var(--muted);
    }

    .grid{
      flex: 1 1 auto;
      min-height: 0;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
    }

    .card{
      background: linear-gradient(135deg, var(--card-1), var(--card-2));
      border-radius: var(--panel-radius);
      padding: var(--panel-pad);
      box-shadow: 0 18px 45px rgba(0,0,0,0.65);
      border: 1px solid rgba(255,255,255,0.04);
      min-height: 0;
      overflow: auto;
    }

    .card h2{
      font-size: 1.05rem;
      margin-bottom: 12px;
      font-weight: 800;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .modo-toggle{
      display: inline-flex;
      border-radius: 999px;
      padding: 3px;
      background: rgba(15,23,42,0.8);
      border: 1px solid rgba(148,163,184,0.35);
      margin-bottom: 16px;
      width: 100%;
    }
    .modo-btn{
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 10px 16px;
      border-radius: 999px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.15s ease;
      flex: 1;
      font-weight: 800;
    }
    .modo-btn.active{
      background: linear-gradient(135deg, var(--shopee-orange), var(--shopee-orange-2));
      color: #111827;
      box-shadow: 0 0 14px rgba(238,77,45,0.45);
    }

    .form-grid{
      display: grid;
      gap: 12px;
      margin-top: 8px;
    }
    label{
      font-size: 0.82rem;
      color: var(--muted);
      font-weight: 700;
      margin-bottom: 6px;
      display: block;
    }
    input, select{
      width: 100%;
      background: linear-gradient(135deg, #020617, #0b1220);
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.45);
      padding: 10px 12px;
      color: var(--text);
      font-size: 0.95rem;
      outline: none;
      transition: all 0.15s ease;
    }
    input:focus, select:focus{
      border-color: var(--shopee-orange);
      box-shadow: 0 0 0 2px rgba(238,77,45,0.25);
    }
    .row-grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .hint{
      font-size: 0.72rem;
      color: #6b7280;
      margin-top: 6px;
    }

    .resultado-principal{
      margin-top: 8px;
      padding: 16px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(238,77,45,0.16), rgba(15,23,42,0.95));
      border: 1px solid rgba(238,77,45,0.35);
      text-align: left;
    }
    .resultado-principal .label{
      font-size: 0.85rem;
      color: var(--muted);
      font-weight: 700;
    }
    .resultado-principal .value{
      font-size: 2rem;
      font-weight: 900;
      margin-top: 6px;
      color: #ffd2c9;
      text-shadow: 0 0 14px rgba(238,77,45,0.22);
    }

    .resumo{
      margin-top: 12px;
      background: radial-gradient(circle at top left, rgba(238,77,45,0.12), transparent 60%);
      border-radius: 12px;
      padding: 12px;
      border: 1px solid rgba(238,77,45,0.18);
    }
    .resumo-title{
      font-size: 0.82rem;
      color: var(--muted);
      margin-bottom: 10px;
      text-align: center;
      font-weight: 900;
    }
    .resumo-grid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px 12px;
      font-size: 0.85rem;
    }
    .resumo-item{
      display: flex;
      justify-content: space-between;
      gap: 10px;
      white-space: nowrap;
    }
    .resumo-label{ color: var(--muted); font-weight: 700; }
    .resumo-value.green{ color: var(--green); font-weight: 900; }
    .resumo-value.red{ color: #fca5a5; font-weight: 800; }

    footer{
      flex: 0 0 auto;
      text-align: center;
      padding: 10px 0 0;
      font-size: 0.85rem;
      color: var(--muted);
    }
    footer span.author{
      color: var(--shopee-orange);
      font-weight: 900;
    }

    /* LOGIN */
    .login-screen{
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(15,17,21,0.98), rgba(5,6,10,0.99));
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn 0.4s ease-out;
    }
    @keyframes fadeIn{
      from { opacity: 0; transform: scale(0.95); }
      to   { opacity: 1; transform: scale(1); }
    }
    .login-card{
      background: linear-gradient(145deg, rgba(24,27,34,0.95), rgba(18,21,28,0.98));
      border-radius: 24px;
      padding: 40px 32px;
      box-shadow: 0 32px 80px rgba(0,0,0,0.75);
      border: 1px solid rgba(238,77,45,0.18);
      text-align: center;
      max-width: 380px;
      width: 92%;
      backdrop-filter: blur(10px);
    }
    .login-logo{
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--shopee-orange), var(--shopee-orange-2));
      border-radius: 20px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 900;
      color: #111827;
      box-shadow: 0 0 30px rgba(238,77,45,0.55);
      animation: pulse 2s infinite;
    }
    @keyframes pulse{
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .login-title{
      color: var(--shopee-orange);
      font-size: 1.4rem;
      margin-bottom: 8px;
      text-shadow: 0 0 20px rgba(238,77,45,0.28);
      font-weight: 900;
    }
    .login-subtitle{
      color: var(--muted);
      font-size: 0.95rem;
      margin-bottom: 28px;
      font-weight: 600;
    }
    .login-input{
      width: 100%;
      background: linear-gradient(135deg, #020617, #0b1220);
      border-radius: 14px;
      border: 2px solid rgba(238,77,45,0.3);
      padding: 14px 18px;
      color: var(--text);
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: 1px;
      text-align: center;
      outline: none;
      transition: all 0.25s ease;
      margin-bottom: 16px;
    }
    .login-input:focus{
      border-color: var(--shopee-orange);
      box-shadow: 0 0 0 4px rgba(238,77,45,0.18), 0 0 20px rgba(238,77,45,0.22);
      transform: translateY(-2px);
    }
    .login-btn{
      width: 100%;
      background: linear-gradient(135deg, var(--shopee-orange), var(--shopee-orange-2));
      color: #111827;
      border: none;
      border-radius: 14px;
      padding: 14px 24px;
      font-size: 1rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 8px 25px rgba(238,77,45,0.35);
    }
    .login-btn:hover:not(:disabled){
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(238,77,45,0.5);
    }
    .login-btn:disabled{
      opacity: 0.7;
      cursor: not-allowed;
    }
    .login-error{
      background: rgba(239,68,68,0.15);
      border: 1px solid rgba(239,68,68,0.4);
      color: #fca5a5;
      padding: 12px;
      border-radius: 12px;
      margin-top: 12px;
      font-size: 0.85rem;
      display: none;
      font-weight: 800;
    }

    @media (max-width: 900px){
      body{ overflow: auto; }
      .stage{ align-items: flex-start; padding: 16px; }
      .wrap{ height: auto; }
      .grid{ grid-template-columns: 1fr; }
      .card{ overflow: visible; }
    }
    @media (max-width: 480px){
      .row-grid{ grid-template-columns: 1fr; }
      header h1{ font-size: 1.55rem; }
    }
  </style>
</head>

<body class="locked">
  <!-- LOGIN -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="login-logo">S</div>
      <h2 class="login-title">Calculadora Shopee</h2>
      <p class="login-subtitle">Digite a senha para ter acesso ao conteúdo</p>
      <input type="password" class="login-input" id="senhaInput" placeholder="Senha de 8 dígitos" maxlength="8" />
      <button class="login-btn" id="loginBtn" disabled>Entrar</button>
      <div class="login-error" id="loginError">Senha incorreta. Tente novamente.</div>
    </div>
  </div>

  <!-- APP -->
  <div class="stage">
    <div class="wrap" id="appContent">
      <header>
        <h1>Calculadora Shopee</h1>
        <p>Precificação completa · Comissão + Frete Grátis + Impostos</p>
      </header>

      <div class="grid">
        <!-- Entradas -->
        <section class="card">
          <h2>Configurações Shopee</h2>

          <div class="modo-toggle">
            <button id="btnModoPreco" class="modo-btn active">Preço pelo Lucro</button>
            <button id="btnModoLiquido" class="modo-btn">Lucro pelo Preço</button>
          </div>

          <div class="form-grid">
            <div>
              <label>Comissão Shopee</label>
              <select id="tipoComissao">
                <option value="0.14">Padrão 14%</option>
                <option value="0.20" selected>Frete Grátis 20%</option>
              </select>
              <div class="hint">Pré-definido em 20% (frete grátis).</div>
            </div>

            <div class="row-grid">
              <div>
                <label>Taxa Fixa (R$)</label>
                <input type="number" id="taxaFixa" value="4" step="0.01" />
              </div>
              <div>
                <label>Imposto NF (%)</label>
                <input type="number" id="imposto" value="4" step="0.1" />
              </div>
            </div>

            <div>
              <label>Ads / Marketing (%)</label>
              <input type="number" id="ads" value="0" step="0.1" />
            </div>

            <div>
              <label>Cupom de desconto (%)</label>
              <input type="number" id="cupomPerc" value="0" step="0.1" />
              <div class="hint">Se preencher, será descontado do seu recebimento.</div>
            </div>

            <div>
              <label>Custo Produto (R$)</label>
              <input type="number" id="custo" value="20" step="0.01" />
            </div>

            <div id="campoLucroDesejado">
              <label>Lucro Desejado (R$)</label>
              <input type="number" id="lucroDesejado" value="15" step="0.01" />
            </div>

            <div id="campoPrecoAtual" style="display:none;">
              <label>Preço Atual (R$)</label>
              <input type="number" id="precoAtual" value="50" step="0.01" />
            </div>
          </div>
        </section>

        <!-- Resultado -->
        <section class="card">
          <h2>Resultado <span style="font-size:0.8rem;color:var(--muted);font-weight:800;">(Shopee 2026)</span></h2>

          <div class="resultado-principal">
            <div class="label" id="labelPrincipal">Preço sugerido:</div>
            <div class="value" id="valorPrincipal">R$ 0,00</div>
          </div>

          <div class="resumo">
            <div class="resumo-title">Resumo completo</div>
            <div class="resumo-grid">
              <div class="resumo-item"><span class="resumo-label">Preço venda</span><span id="rPreco">R$ 0,00</span></div>
              <div class="resumo-item"><span class="resumo-label">Comissão</span><span class="resumo-value red" id="rComissao">R$ 0,00</span></div>

              <div class="resumo-item"><span class="resumo-label">Taxa fixa</span><span class="resumo-value red" id="rTaxa">R$ 0,00</span></div>
              <div class="resumo-item"><span class="resumo-label">Imposto NF</span><span class="resumo-value red" id="rImposto">R$ 0,00</span></div>

              <div class="resumo-item"><span class="resumo-label">Ads</span><span class="resumo-value red" id="rAds">R$ 0,00</span></div>
              <div class="resumo-item"><span class="resumo-label">Cupom</span><span class="resumo-value red" id="rCupom">R$ 0,00</span></div>

              <div class="resumo-item"><span class="resumo-label">Custo prod.</span><span class="resumo-value red" id="rCusto">R$ 0,00</span></div>
              <div class="resumo-item"><span class="resumo-label">Lucro líquido</span><span class="resumo-value green" id="rLucro">R$ 0,00</span></div>
            </div>
          </div>
        </section>
      </div>

      <footer>
        Desenvolvido por <span class="author">Fabiano Souza</span> · Calculadora de Precificação Shopee
      </footer>
    </div>
  </div>

  <script>
    // SENHA
    const SENHA_CORRETA = '99662444';
    const loginScreen = document.getElementById('loginScreen');
    const appContent = document.getElementById('appContent');
    const senhaInput = document.getElementById('senhaInput');
    const loginBtn = document.getElementById('loginBtn');
    const loginError = document.getElementById('loginError');
    const body = document.body;

    // IMPORTANTE: Sem "lembrar login" (sem localStorage) para exigir senha sempre.

    senhaInput.addEventListener('input', function() {
      const valor = this.value;
      loginBtn.disabled = valor.length < 8;
      if (valor.length === 8) {
        loginBtn.style.background = 'linear-gradient(135deg, var(--green), #4ade80)';
      } else {
        loginBtn.style.background = 'linear-gradient(135deg, var(--shopee-orange), var(--shopee-orange-2))';
      }
    });

    loginBtn.addEventListener('click', function() {
      const senhaDigitada = senhaInput.value;
      if (senhaDigitada === SENHA_CORRETA) liberarAcesso();
      else mostrarErro();
    });

    senhaInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && this.value.length === 8) {
        const senhaDigitada = senhaInput.value;
        if (senhaDigitada === SENHA_CORRETA) liberarAcesso();
        else mostrarErro();
      }
    });

    function mostrarErro() {
      loginError.style.display = 'block';
      senhaInput.style.borderColor = 'var(--red)';
      senhaInput.style.boxShadow = '0 0 0 4px rgba(239,68,68,0.2)';
      setTimeout(() => {
        loginError.style.display = 'none';
        senhaInput.style.borderColor = 'rgba(238,77,45,0.3)';
        senhaInput.style.boxShadow = 'none';
        senhaInput.value = '';
        loginBtn.disabled = true;
      }, 2000);
    }

    function liberarAcesso() {
      loginScreen.style.opacity = '0';
      loginScreen.style.transform = 'scale(0.9)';
      loginScreen.style.pointerEvents = 'none';
      body.classList.remove('locked');
      appContent.classList.add('unlocked');
      setTimeout(() => { loginScreen.style.display = 'none'; }, 400);
      setTimeout(setupCalculadora, 250);
    }

    function setupCalculadora() {
      let modoAtual = 'preco'; // preco | liquido
      const el = id => document.getElementById(id);

      function formatMoney(v) {
        if (isNaN(v) || !isFinite(v)) v = 0;
        return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
      }

      function calcular() {
        const comissao = parseFloat(el('tipoComissao').value);
        const taxaFixa = parseFloat(el('taxaFixa').value) || 0;
        const impostoPerc = (parseFloat(el('imposto').value) || 0) / 100;
        const adsPerc = (parseFloat(el('ads').value) || 0) / 100;

        // Cupom (%) sempre desconta de você
        const cupomPerc = (parseFloat(el('cupomPerc').value) || 0) / 100;

        const custo = parseFloat(el('custo').value) || 0;

        let precoVenda = 0;
        let lucroLiquido = 0;
        let labelText = '';

        if (modoAtual === 'preco') {
          const lucroDesejado = parseFloat(el('lucroDesejado').value) || 0;

          // Cupom entra como percentual variável (igual comissão/imposto/ads)
          const somaPerc = comissao + impostoPerc + adsPerc + cupomPerc;
          const divisor = 1 - somaPerc;

          if (divisor > 0) {
            precoVenda = (custo + lucroDesejado + taxaFixa) / divisor;
          } else {
            precoVenda = 0;
          }

          lucroLiquido = lucroDesejado;
          labelText = 'Preço sugerido (lucro desejado):';
        } else {
          precoVenda = parseFloat(el('precoAtual').value) || 0;

          const valComissaoX = precoVenda * comissao;
          const valImpostoX  = precoVenda * impostoPerc;
          const valAdsX      = precoVenda * adsPerc;
          const valCupomX    = precoVenda * cupomPerc;

          lucroLiquido = precoVenda - (valComissaoX + valImpostoX + valAdsX + valCupomX + taxaFixa + custo);
          labelText = 'Lucro líquido (preço atual):';
        }

        const valComissao = precoVenda * comissao;
        const valImposto  = precoVenda * impostoPerc;
        const valAds      = precoVenda * adsPerc;
        const valCupom    = precoVenda * cupomPerc;

        el('labelPrincipal').textContent = labelText;
        el('valorPrincipal').textContent = formatMoney(modoAtual === 'preco' ? precoVenda : lucroLiquido);

        el('rPreco').textContent = formatMoney(precoVenda);
        el('rComissao').textContent = formatMoney(valComissao);
        el('rTaxa').textContent = formatMoney(taxaFixa);
        el('rImposto').textContent = formatMoney(valImposto);
        el('rAds').textContent = formatMoney(valAds);
        el('rCupom').textContent = formatMoney(valCupom);
        el('rCusto').textContent = formatMoney(custo);
        el('rLucro').textContent = formatMoney(lucroLiquido);
      }

      function trocarModo(novoModo) {
        modoAtual = novoModo;
        if (novoModo === 'preco') {
          el('btnModoPreco').classList.add('active');
          el('btnModoLiquido').classList.remove('active');
          el('campoLucroDesejado').style.display = 'block';
          el('campoPrecoAtual').style.display = 'none';
        } else {
          el('btnModoPreco').classList.remove('active');
          el('btnModoLiquido').classList.add('active');
          el('campoLucroDesejado').style.display = 'none';
          el('campoPrecoAtual').style.display = 'block';
        }
        calcular();
      }

      [
        'tipoComissao','taxaFixa','imposto','ads',
        'cupomPerc',
        'custo','lucroDesejado','precoAtual'
      ].forEach(id => {
        const node = el(id);
        if (!node) return;
        node.addEventListener('input', calcular);
        node.addEventListener('change', calcular);
      });

      el('btnModoPreco').addEventListener('click', () => trocarModo('preco'));
      el('btnModoLiquido').addEventListener('click', () => trocarModo('liquido'));

      calcular();
    }
  </script>
</body>
</html>
